<!DOCTYPE html>
<!-- Juan Salamanca 2019 -->

<html>

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Agent-based modeling of color proximity</title>

  <!-- CSS -->
  <style>
  p{font-size:11px;}
  </style>
  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

  <script src="libs/p5.js" type="text/javascript"></script>
  <script src="libs/p5.dom.js" type="text/javascript"></script>
  <script src="libs/chroma.min.js" type="text/javascript"></script>

  <!-- Code -->
  <script src="src/main/P5_main.js" type="text/javascript"></script>
  <script src="src/main/P5_heatmap.js" type="text/javascript"></script>
  <script src="src/main/P5_viscosityChart.js" type="text/javascript"></script>
  <script src="src/world.js" type="text/javascript"></script>
  <script src="src/agents/agent.js" type="text/javascript"></script>
  <script src="src/agents/humanAgent.js" type="text/javascript"></script>
  <script src="src/agents/nonhumanAgent.js" type="text/javascript"></script>
  <script src="src/visualAgents/vAgent.js" type="text/javascript"></script>
  <script src="src/colorFactory.js" type="text/javascript"></script>

  <!-- Visualization code -->
  <script src="src/dataViz/visualInteractionMatrix.js" type="text/javascript"></script>
  <script src="src/dataViz/lattice.js" type="text/javascript"></script>
  <script src='src/dataViz/chart.js' type="text/javascript"></script>

  <!-- Utils -->
  <script src="src/utils/utils.js" type="text/javascript"></script>

  <!-- Metrics -->
  <script src="src/metrics/metrics.js" type="text/javascript"></script>

  <!-- Mental models -->
  <script src="src/mentalModels/cMentalModel.js" type="text/javascript"></script>
  <script src="src/mentalModels/sMentalModel.js" type="text/javascript"></script>

  <!-- Libraries -->
  <script src="libs/chroma.js" type="text/javascript"></script>

  <!-- utility library https://lodash.com/-->
  <!--script src='https://cdn.jsdelivr.net/g/lodash@4(lodash.min.js+lodash.fp.min.js)'></script>-->
  <script src="libs/lodash.min.js" type="text/javascript"></script>

</head>


<body>
  <!-- NAVBAR & HEADER -->
  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="row">
        <div class="navbar-header" style="margin-top:10px">
          <p style="font-size:12px; color:grey;"> <img class="img-responsive" src="images/D4SVwhite.png" width="160"> Design for social viscosity lab. <br> University of Illinois  Urbana-Champaign</p>
        </div>
        <ul class="nav navbar-nav">
          <li><a href="#Description">Model description</a></li>
          <li><a href="#Simulation">Simulation</a></li>
          <li><a href="#Viscosity">Viscosity</a></li>
          <li><a href="#References">References</a></li>
          <li><a href="https://github.com/SocialViscosityLab/ColorAgents" target="_blank">GitHub</a></li>
        </ul>
      </div>

      <div class="row">
        <div class = "col-sm-12">
          <h4 style="color:white;">Agent-based model of color proximity </h4>
        </div>
      </div>

      <div class="row">
        <!-- Color Factory -->
        <div class="col-sm-3">
          <p style="font-size:12px; color:grey;"><b>Color factory:</b> A factory of predifined color palettes to be asigned to human agents' mental models</p>
          <p style="font-size:12px; color:grey;">
            <select id="cFactory">
              <option value="test">Triad</option>
              <option value="secondary">Secondary</option>
              <option value="newton">Newton</option>
              <option value='munsell' selected>Munsell</option>
              <option value="testInverted">Triad Inverted</option>
              <option value="secondaryInverted">Secondary Inverted</option>
              <option value="newtonInverted">Newton Inverted</option>
              <option value='munsellInverted'>Munsell Inverted</option>
            </select>
          </p>
        </div>


        <!-- Interaction rule -->
        <div class="col-sm-3">
          <p style="font-size:12px; color:grey;">
            <b>Interaction rule:</b> How agents choose their interactants from the world</p>
            <p style="font-size:12px; color:grey;">
              <select id="rule">
                <option value =""> Interaction rule</option>
                <option value="all">all</option>
                <option value="nClosest" selected>N closest</option>
                <option value="radius">by radius</option>
                <option value='byField'>by visual perception field (Warning!: Glitcy)</option>
              </select>
            </p>

            <div class="row">
              <!-- Slider radius -->
              <div class='col-sm-12'>
                <p style="font-size:12px; color:grey;">
                  Set N closest, radius or visual perception field <br>
                  <input type="range" min="0" max="20" value="5" id="range" step ="5"
                    oninput= "mainP5.updateSliderValue ('sliderValue',Number(this.value))"
                  ></input>
                  <span id="sliderValue" > 5 </span>
                </p>
              </div>
            </div>
          </div>


          <!-- sensibility -->
          <div class="col-sm-3">
            <p style="font-size:12px; color:grey;">
              <b>Sensibility: </b> How agents estimate their proximity to their interactants based on their color mental model. Inspired by
              Stevens' psychophysics (1975).
            </p>
            <p style="font-size:12px; color:grey;">
              <select id="sensibility">
                <option value="linear">Linear function</option>
                <option value="exponential">Exponential function</option>
              </select>
            </p>
          </div>

          <!-- Slider change threshold magnitude -->
          <div class="col-sm-3">
            <p style="font-size:12px; color:grey;">
              <b>Tolerance: </b> The agents' conformity to displacement from expected distances to interactants<br>
              <input type="range" min="0" max="1" value="0.2" id="changeMagnitude" step="0.2"
                oninput= "mainP5.updateSliderValue ('sliderChangeMagnitude',Number(this.value))">
              </input>
              <span id="sliderChangeMagnitude" > 0.2 </span>
            </p>
          </div>
        </div>
      </div>
    </nav>

    <!-- END NAVBAR & HEADER -->
    <a name="Description"></a>
    <div class="container">
      <!-- DESCRIPTION -->
      <div class="row">

          <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

          <div class = "col-sm-6">
            <b>Model description</b>
            <p style="font-size:14px;">
              The visual spectrum of light is commonly represented as a linear sequence
              of hues that resembles the rainbow, starting at red and ending at purple.
              <a name="Simulation"></a>
              Newtonâ€™s generally accepted model for additive color theory --as well
              as Munsell's model-- connects both ends of the spectrum in a circular color model.
              This means that purple and red are perceptually closer to each other than
              to intermediate hues such as green.
              <br><br>
              Shepard and Cooper (1992) demonstrated that normally sighted people organize
              primary hues mirroring such circular model. The agent-based model (ABM)
              herein is the result of an experiment inspired
              by Shepard and Cooper methods.
            </p>
          </div>
          <div class = "col-sm-6">
            <p style="font-size:14px;">
              <br>
              Eighteen participants were asked
              to impersonate one out of 18 hues picked from the Munsell's color wheel and
              choose a random spot in a square room. Their task was to find the location
              where they feel their hue was near to other's and far away from those with
              distant hues.<br><br>
              After a couple of minutes moving around the room participants organized
              themselves in the same circular shape observed by Shepard and Cooper's.
              This ABM model recreates the participants behavior in such experiment
              and studies the social viscosity mutually exerted as participants tried
              to accomplish the task.
            </p>
          </div>

      </div>

    <hr>

    <!-- SIMULATION -->
    <div class="row">
      <div class = "col-sm-12">
        <p style="font-size:16px;">
          <b>Simulation</b>
        </p>
      </div>
    </div>

    <div class='row'>
      <!-- Control simulation buttons -->
      <div class="col-sm-2">
        <p>
          <br>
          <button  type = "button" id = "run" > Run Simulation </button>
          <button  type = "button" id = "reset" > Reset </button>
          <br>
        </p>

        <!-- Visibility Buttons -->
        <p><br><b>Visibility controls</b></p>
        <p><input  type = "checkbox" id = "showAgents" checked> Show agents </input></p>
        <p><input  type = "checkbox" id = "showTrajectories" > Show trajectories </input></p>
        <p><input  type = "checkbox" id = "showInteractions" checked> Show interactions </input></p>
        <p><input  type = "checkbox" id = "showPerceptionField" checked> Show perception field </input></p>
        <hr>
        <p><b>Export</b></p>
        <p> <button  type = "button" id = "trajectories_to_JSON" > Trajectories to JSON</button> </p>
        <p> <button  type = "button" id = "trajectories_to_JSON2" > Trajectories to JSON 2</button> </p>
        <p> <button  type = "button" id = "trajectories_to_CSV" > Trajectories to CSV</button> </p>

      </div>

      <!-- SIMULATION CANVAS -->
      <div class="col-sm-10">
        <p style = "font-size:12px">Observers in the world: <span id="agentsInWorld" > 0 </span> 
          &nbsp | &nbsp Humans: <span id="humansInWorld" > 0 </span> 
          &nbsp  | &nbsp Nonhumans: <span id="nonhumansInWorld" > 0 </span>
          &nbsp  | &nbsp Ticks: <span id="ticksInWorld" > 0 </span>
          &nbsp  | &nbsp Viscosity: <span id="viscosityInWorld" > 0 </span>
        </p>
        <a name="Viscosity"></a>
        <div id="ColorAgents" align="center"></div>
      </div>
    </div>

    <hr>

    <!-- CHARTS -->
    <div class="row">
      <div class = "col-sm-12">
        <p style="font-size:16px;">
          <b>Interaction viscosity</b>
        </p>

        <p style="font-size:14px;">
          The viscosity of a social practice is estimated by contrasting
          the situation each agent "intended to be" with the situation they "ended"
          after the concurrent execution of actions. The meaning of "situation"
          encompasses the interactions with the world and its dwellers.
        </p>
      </div>
    </div>

    <br>

    <div class = "row">
      <div class = "col-sm-2">
        <p><input  type = "checkbox" id = "showMatrix" checked> Show interaction matrix </input></p>
        <p><input  type = "checkbox" id = "showSeries" checked> Plot global viscosity </input></p>
        <p><input  type = "checkbox" id = "showIndividualSeries"> Plot viscosity for each agent </input></p>

        <hr>

        <p><b>Export to JSON</b></p>
        <p> <button  type = "button" id = "viscosities_to_JSON" > All viscosities</button> </p>
        <p> <button  type = "button" id = "globalViscosity_to_JSON" > Global viscosity</button> </p>
      </div>

      <!-- MATRIX -->
      <div class="col-sm-5">
        <p style = "font-size:12px">Interaction matrix</p>
        <div id="PlotMatrix"></div>
      </div>

      <!-- VISCOSITY CHART -->
      <div class = "col-sm-5">
        <p style = "font-size:12px">Viscosity chart</p>
        <div id="TimeSeries"></div>
        <p style = "font-size:12px">Viewing charts at tick <span id="sliderChart" > 0 </span></p>
        <input type="range" min="0" max="0" value="0" id="ticks" 
          oninput="vizMatrix.setLastMatrix(Number(this.value));
          mainP5.updateSliderValue('sliderChart', Number(this.value))"></input>
      </div>
    </div>
    <!-- END OF LAST ROW-->


    <hr>

    <a name="References"></a>
    <!-- References -->
    <div class = "row">
      <p style="font-size:16px;">
        <b>References</b>
      </p>

      <p>
        <a href="http://tools.medialab.sciences-po.fr/iwanthue/" target="_blank">I Want Hue </a>,
        <a href="http://gka.github.io/chroma.js/#color-luminance" target="_blank">chroma.js </a>,
        <a href="http://p5js.org" target="_blank">P5.js</a>,
        <a href="http://colormine.org/color-converter" target="_blank">Color converter</a>,
        <a href="http://handprint.com/LS/CVS/color.html" target="_blank">Color vision theory</a>,
        <a href="https://colorusage.arc.nasa.gov" target="_blank"> Color in Information display graphics</a>
      </p>

      <p style="font-size:11px"> Juan Salamanca 2019 &nbsp | &nbsp Made with <a href="http://P5js.org" target="self"> P5.js</a></p>
    </div>

  </div>
</body>
</html>
